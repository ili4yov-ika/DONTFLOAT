# История изменений документации DONTFLOAT

## 2026-01-25 - Размер такта и тактовая сетка

### Обновлено

- ✅ **docs/features.md**
  - Добавлен подраздел **«Размер такта и тактовая сетка»** в разделе «Визуализация волны»:
    - Выбор размера такта выпадающим списком (4/4, 3/4, 1/4, 2/4, 6/8, 12/8) в главном окне и в диалоге загрузки
    - Правило построения сетки по **знаменателю**: X/4 → 4 доли в такте, X/8 → 8 долей в такте
    - Длина такта в четвертях для каждого размера; согласованность подписи позиции (такты и доли) с сеткой
  - Уточнены формулировки в «Визуальные элементы» (такты, биты/доли)

---

## 2026-02-14 - Приведение документации в соответствие с кодовой базой

### Обновлено

- ✅ **ARCHITECTURE.md**
  - MarkerStretchEngine заменён на **MarkerEngine** (MarkerData, Marker)
  - Добавлен компонент **TimeStretchCommand** (undo/redo по меткам)
  - Уточнены роли TimeStretchProcessor (applyMarkerStretch, WSOLA)
  - В разделе «Система команд» добавлено описание TimeStretchCommand

- ✅ **README.md** (MARKDOWN/)
  - Список компонентов: MarkerEngine, TimeStretchProcessor, TimeStretchCommand
  - Ссылка на FEATURES исправлена на docs/features.md
  - Удалены ссылки на несуществующие планы (PLAN_BEAT_DEVIATION_NEXT_STEPS, PLAN_REALTIME_MARKER_STRETCH)
  - Обновлён список завершённых документов, дата обновления: 2026-02-14

- ✅ **DEVELOPMENT_GUIDE.md**
  - TimeStretchCommand описан как реализованный (не «планируется»)
  - Ссылки на MarkerStretchEngine заменены на MarkerEngine

- ✅ **TIMESTRETCH_FEATURE.md**
  - Секция MarkerStretchEngine заменена на актуальную архитектуру (MarkerEngine, TimeStretchCommand)
  - Статус функции: реализовано; WSOLA и TimeStretchCommand отмечены как реализованные
  - Обновлены примеры кода и план развития

- ✅ **CONSOLE_MODE.md**
  - Добавлено примечание о текущих ограничениях консольного режима (синтетические данные, возможное зависание анализа)

**Пользовательская документация (папка docs/)**:
- ✅ **docs/architecture.md** — добавлен TimeStretchCommand в Command Pattern; уточнены ограничения меток (50 мс, соседние метки, MarkerEngine/MarkerData); примечание об ограничении консольного режима; раздел «Известные проблемы» приведён в соответствие с реализацией; дата обновления: февраль 2026
- ✅ **docs/features.md** — добавлена строка про отмену/повтор (Ctrl+Z/Ctrl+Y) после применения сжатия-растяжения; дата: февраль 2026
- ✅ **docs/shortcuts.md** — добавлен пункт 7 (отмена/повтор эффекта) и уточнение про ограничение перетаскивания меток; дата: февраль 2026

- ✅ **README.md** (корневой) — версия 0.0.0.1 и дата (февраль 2026); исправлены метроном (`T`) и метка сжатия/растяжения (`M`); визуализация отклонений: красный/синий (не зелёный), треугольники, порог 2%; раздел сжатия-разжатия приведён к системе меток (M, Ctrl+T, ограничения 50 мс); удалён дублирующий блок «Возможности»; добавлен раздел «Консольный режим»; раздел документации переструктурирован (пользовательская / для разработки), убрана битая ссылка на MARKDOWN/FEATURES.md; лицензия и Qt-модули уточнены

### Синхронизация

- Версия проекта во всех документах: **0.0.0.1**
- Архитектура меток: MarkerEngine + TimeStretchProcessor + TimeStretchCommand (MarkerStretchEngine удалён из кодовой базы)

---

## 2025-01-08 - Актуализация документации проекта

### Добавлено

- ✅ **TIMESTRETCH_FEATURE.md** - документ о функции сжатия-разжатия времени
  - Описание архитектурных компонентов (позже обновлено: MarkerEngine, TimeStretchProcessor, TimeUtils, TimeStretchCommand)
  - Пользовательский интерфейс и горячие клавиши
  - Алгоритмы обработки (Phase Vocoder, WSOLA)
  - Интеграция с системой команд
  - План развития функции

### Обновлено (на 2025-01-08)

- ✅ **ARCHITECTURE.md** — добавлены компоненты BeatVisualizer, WaveformAnalyzer, механизм растяжения по меткам, TimeStretchProcessor, TimeUtils, MetronomeController; статус PitchGridWidget

- ✅ **DEVELOPMENT_GUIDE.md**
  - Добавлено описание TimeStretchCommand (планируется)
  - Обновлен список сохраняемых параметров
  - Добавлена информация о настройках метронома

- ✅ **MARKDOWN/README.md**
  - Обновлен список завершенных документов
  - Добавлена секция "Обновления" с датой последнего обновления
  - Добавлены ссылки на новые документы
  - Обновлен список основных компонентов в описании ARCHITECTURE.md

- ✅ **README.md** (корневой)
  - Добавлена информация о статусе PitchGridWidget (отключено по умолчанию)
  - Добавлены ссылки на новые документы (MIXXX_LIBRARIES_STATUS.md, TIMESTRETCH_FEATURE.md)
  - Добавлена секция "Сжатие-разжатие времени" с горячими клавишами

### Синхронизация

- ✅ Версия проекта синхронизирована во всех документах: **0.0.0.1**
- ✅ Информация о PitchGridWidget синхронизирована (отключено по умолчанию)
- ✅ Списки компонентов синхронизированы между документами

### Структура документации

Текущая структура папки `MARKDOWN/` (актуально на 2026-02-14):

```
MARKDOWN/
├── ARCHITECTURE.md              # Архитектура проекта
├── BEAT_DEVIATION_VISUALIZATION.md  # Визуализация отклонений (отключена)
├── CONSOLE_MODE.md              # Консольный режим
├── DEVELOPMENT_GUIDE.md         # Руководство разработчика
├── DEVELOPMENT_HISTORY.md       # История разработки
├── DOCUMENTATION_CHANGELOG.md   # История изменений документации
├── INIT.MD                      # Правила разработки
├── ISSUES_AND_PLANS.md          # Проблемы и планы
├── MIXXX_LIBRARIES_STATUS.md    # Статус библиотек Mixxx
├── README.md                    # Обзор документации
├── SHORTCUTS.md                 # Горячие клавиши
├── SUMMARY_BEAT_DEVIATION_FIX.md # Резюме исправления визуализации
├── TESTING_GUIDE.md             # Руководство по тестированию
├── TIMESTRETCH_FEATURE.md       # Функция сжатия-разжатия времени
└── TROUBLESHOOTING.md           # Решение проблем
```

## Следующие шаги

### Рекомендуемые обновления

1. **ISSUES_AND_PLANS.md**
   - Проверить актуальность статусов задач
   - Обновить информацию о реализованных функциях
   - Добавить планы по TimeStretch функции

2. **DEVELOPMENT_HISTORY.md**
   - Добавить запись о версии 0.0.0.1
   - Описать основные достижения
   - Зафиксировать технические решения

3. **Пользовательская документация** (папка `docs/`)
   - Обновить скриншоты интерфейса
   - Добавить примеры использования TimeStretch
   - Создать видео-туториалы

### Планы на будущее

1. **Автоматизация обновлений**
   - Скрипт проверки консистентности версий
   - Автоматическая генерация changelog при коммитах
   - Валидация ссылок между документами

2. **Расширение документации**
   - API документация для разработчиков плагинов
   - Подробные туториалы по каждой функции
   - FAQ раздел на основе пользовательских вопросов

3. **Локализация документации**
   - Перевод ключевых документов на английский
   - Создание мультиязычной структуры
   - Синхронизация переводов

## Контрольный список обновления документации

При добавлении новых функций или изменении существующих:

- [ ] Обновить INIT.MD (если затрагиваются правила разработки)
- [ ] Обновить ARCHITECTURE.md (если добавлены новые компоненты)
- [ ] Обновить DEVELOPMENT_GUIDE.md (если изменились процессы разработки)
- [ ] Обновить ISSUES_AND_PLANS.md (добавить/обновить статусы задач)
- [ ] Обновить SHORTCUTS.md (если добавлены новые горячие клавиши)
- [ ] Обновить README.md в MARKDOWN/ (добавить новые документы в список)
- [ ] Обновить корневой README.md (если функция видна пользователям)
- [ ] Создать специализированный документ для сложных функций
- [ ] Обновить DOCUMENTATION_CHANGELOG.md (зафиксировать изменения)
- [ ] Синхронизировать версии во всех документах
- [ ] Проверить все ссылки между документами

---

*Этот документ служит для отслеживания изменений в документации проекта DONTFLOAT.*

